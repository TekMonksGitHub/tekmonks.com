<!-- (C) 2015 TekMonks. All rights reserved.License: GPL2 - see enclosed license.txt file.-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta http-equiv="expires" content="-1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="./pages/common/common.css" rel="stylesheet" />
        <link href="./img/favicon.ico" rel="icon" type="image/x-icon" />
        <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch&display=swap" rel="stylesheet">
        <style>
            #loading-container {
                height: 100vh;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
            
            .loading-spinner {
                width: auto;
                height: 6em;
            }
        </style>
        <script type="module" async>
            import { navigation_menu } from "./components/navigation-menu/navigation-menu.mjs";
            navigation_menu.register();
            import { image_slider } from "./components/image-slider/image-slider.mjs";
            image_slider.register();
            import { content_tile } from "./components/content-tile/content-tile.mjs";
            content_tile.register();
            import { content_post } from "./components/content-post/content-post.mjs";
            content_post.register();
            import { page_meta } from "./components/page-meta/page-meta.mjs";
            page_meta.register();
            import { page_generator } from "/framework/components/page-generator/page-generator.mjs";
           
            import {session} from "/framework/js/session.mjs";

            let urlParam = window.location.search.replace(new RegExp('/\?.='), "")
            let productName = new RegExp('products(.*?).md').exec(atob(urlParam.substring(1)))
            let newLayout = ['api400', 'apiboss']
            
            if(window.sessionStorage.getItem("referrer") == "DLT"){
                document.body.innerHTML += newLayout.some((e) => productName[1].includes(e)) ?  '<page-generator file="./pages/landing/dltlanding_n.page"></page-generator>' : '<page-generator file="./pages/landing/dltlanding.page"></page-generator>'
            }else{
                document.body.innerHTML += newLayout.some((e) => productName[1].includes(e)) ?  '<page-generator file="./pages/landing/landing_n.page"></page-generator>' : '<page-generator file="./pages/landing/landing.page"></page-generator>'
            }
           
            let spinnerInterval = setInterval(() => {
                let shadowContainer = document.getElementsByTagName('page-generator')
                if (shadowContainer[0].shadowRoot) {
                    document.getElementById('loading-container').style.display = 'none'
                    clearInterval(spinnerInterval)
                }
            }, 200)          
        </script>

        <title>{{i18n.Title}}</title>
    </head>
    <body style="margin: 0%;">
        <div class="loading" id="loading-container">
            <img class="loading-spinner" id="loading-spinner" src="./img/loading_spinner.svg"></img>
        </div>
    </body>
</html>
